

版本控制工具账户密码：

cvs  ip  :192.168.15.250
     user:zhaomeng
     prot:2401
     path:/u_back/cvsboss/cvsdata/JSZHD_ETRADE
     password: 32G02Y4v


svn  ip :192.168.20.30
     user:yh
     password:1


服务器列表：

   用户名                  jszhd        xhcp_pro
   密码                  zhd9152$**     xhcp_pro@1


	用途	内网IP	内网端口	内网域名	外网地址	外网端口	外网域名
B2B_生产	前台	192.168.20.130	22/8686	web.unionb2b.com	218.93.118.132	22345/80(8686)	www.unionb2b.com
	后台	192.168.20.131	22/7090	admin.unionb2b.com		22346/7090	
	数据库	192.168.20.132	22/1521	oracle.unionb2b.com		22347/15211	
B2B_测试	前台	192.168.80.249	22/8080	webtest.unionb2b.com		12346/无	
	后台	192.168.80.248	22/7090	admintest.unionb2b.com		12345/无	
	数据库	192.168.80.250	1521	oracletest.unionb2b.com		12347	
B2B_ERP_测试	应用_2	192.168.20.136					
	数据库_2	192.168.20.137					
	应用/禅道	192.168.20.135	8090			8090	
	数据库	192.168.20.133					
	数据库	192.168.20.134					
ERP_生产	应用	192.168.20.50	8089	erp.unionb2b.com		8089	
	数据库	192.168.20.51	1521	erpdb.unionb2b.com		11521	
OA_生产	应用	192.168.20.100	7778/5222/89/88	oa.unionb2b.com		7778/5222/89/88	
	数据库	192.168.20.101		oadb.unionb2b.com			
	报表	192.168.20.102	8075	finereport.unionb2b.com		8075	
微信	应用	192.168.20.149	9999/8081	wechat.unionb2b.com		9999/8081	
SVN		192.168.20.30					
ERP_2014	应用/数据库	192.168.80.159	9000				
ERP_2015	应用/数据库	192.168.80.158	9000				
ERP_2016	应用	192.168.80.150	8089				
	数据库	192.168.80.151					
ERP_测试	数据库	192.168.80.155					
DNS		192.168.20.2		ntp.unionb2b.com			
NTP		192.168.20.2					
内部导航网站		192.168.80.79		start.unionb2b.com		




生产机演示：

身份证
 420500197604252442 	女 	41 	湖北省 宜昌市 宜昌市
 371400198404309948 	女 	33 	山东省 德州市 德州市
 231182198511273255 	男 	32 	黑龙江省 黑河市 五大连池市
 532925198610236722 	女 	31 	云南省 大理白族自治州 弥渡县
 330282198712027729 	女 	30 	浙江省 宁波市 慈溪市
 500230198003092515 	男 	37 	重庆市 县 丰都县
 231124198601140153 	男 	31 	黑龙江省 黑河市 孙吴县
 511701197509160208 	女 	42 	四川省
 330881199106229014 	男 	26 	浙江省 衢州市 江山市
 421224199312022332 	男 	24 	湖北省 咸宁市 通山县

账号：****************************

买家  C0001039    888888

卖方  C0000137   111111

ERP   youlin01         111111

后台   wyk        888888

仓库    ：    友邻港仓库
仓库会员： 友邻港仓库-会员   cangkuy 888888

URL:****************************

后台 :    http://218.93.118.132:7090/ 
前台 ：   http://218.93.118.132:8686/
erp  :    http://218.93.118.132:8090/eep/login.htm



数据库一些表：

挂牌上架表：tab_order_s
购物车表：  tab_shopping_cart
编号规则表：tabf_bill_coding_rule
MSG模版表  ：tabf_msg_sendtpl
短信发送表：tab_sms_msg_log
短信历史表：tab_sms_msg_hislog
用户表    ：tab_customer_group
信用金帐号总表:tab_zhd_user_credit
信用金申请表：tab_zhd_creadit_apply
信用金使用表 tab_zhd_credit_use
信用金使用明细表：tab_zhd_credit_use_detail
信用金还款表:tab_zhd_credit_payback
信用金还款明细表：tab_zhd_credit_payback_detail
挂牌参数表：tab_zhd_order_agrs
质保书：tab_zhd_warranty_book
理计购买会员：tab_zhd_richard
行业大类值表 tabf_zhd_industry_type
行业分类：tab_zhd_industry_class
行业分类明细：tab_zhd_industry_class_detail
延期支付设置：tab_zhd_delay_pay
发票申请：tab_zhd_invoice
异议处理：tab_zhd_objection
意见反馈：tab_zhd_web_feedback
发票地址：tab_zhd_bill_addr
商品信息：tab_zhd_goods_info
产地图片:tab_zhd_origin_pic
手机号变更申请（服务中心）tab_zhd_change_phone
加工申请：tab_zhd_process
到货通知 ：tab_zhd_goods_inform
出门证 ： tab_zhd_passout
资金日志：tab_zhd_money_log
积分日志:tab_zhd_point_log


teamview : 
995821881@qq.com
multiplo_123



进程业务整理：

理计订单支付违约：业务需求
超过付款截止日（理计订单生成日期+23:59为付款截止日），需区分商品来源******************************

若是Excel商品，系统判买方违约，订单状态为违约，系统解冻Excel物资，若买方有支付货款，货款不退还。

若是ERP商品，系统判买方违约，订单状态为违约，若买方有支付货款，货款不退还，并需调用接口3.4（江伟强开发的接口，请咨询江伟强是否已对量进行处理）

3.4接口业务处理：理计订单超过付款截止日买方未付款完全款，调用接口发送库存解冻指令给ERP系统，接口返回成功，平台更新订单状态为违约，
平台解冻理计订单物资并返回至物资可卖量中；ERP系统解冻物资，物资增加，ERP系统调用ERP物资导入接口；平台相对应的物资可卖数量增加，
若物资已上架，则挂牌单的可卖量相应的增加。接口反馈结果失败及原因，平台给出提示，订单取消失败。

-----------------------------------------------------分割线--------------------------------------------------------------------------------------

理计定金支付违约：业务需求**********************
理计使用定金支付后，付款截止为锁货期限（理计订单生成日期+锁货天数+23:29；客户做的支付比例与锁货期限的关系功能，在后台叫延期支付时间管理），超过锁货期限后，需区分商品来源

业务处理同理计订单支付违约

-----------------------------------------------------分割线--------------------------------------------------------------------------------------

磅计合同支付违约：业务需求
超过付款截止日（磅计提单生成日期+23:59），需区分商品来源       ？

若是Excel商品，系统判买方磅计合同违约，系统解冻Excel物资，若买方有支付货款，货款不退还。

若是ERP商品，系统判买方磅计合同违约，若买方有支付货款，货款不退还，并需调用接口3.4（江伟强开发的接口，请咨询江伟强是否已对量进行处理）

3.4接口业务处理：交易平台磅计合同违约、解除时，发送物资解冻指令给ERP系统，ERP系统解冻剩余合同量，取消提单，接口返回成功，平台更新合同状态为违约或解除，
对应的提单平台进行取消并将提单量返回至物资可卖量中。ERP系统解冻物资，物资增加，ERP系统调用ERP物资导入接口；平台相对应的物资可卖数量增加，
若物资已上架，则挂牌单的可卖量相应的增加。接口反馈结果失败及原因，平台给出提示，合同解除失败。

-----------------------------------------------------分割线--------------------------------------------------------------------------------------

磅计订单超过提单截止日：业务需求
磅计订单超过提单截止日（磅计订单生成日期+23:59），，需区分商品来源是   ？

若是Excel商品，系统判配送方式买方自提则买方违约；配送方式为卖方送货则卖方违约，订单状态为违约，系统解冻Excel物资。

若是ERP商品，系统判配送方式买方自提则买方违约；配送方式为卖方送货则卖方违约订单状态为违约,并需调用接口3.4（江伟强开发的接口，请咨询江伟强是否已对量进行处理）

3.4接口业务处理：磅计订单超过提货截止日未提货或未提完货时，平台系统调用接口发送订单剩余物资量解冻指令给ERP系统，接口返回成功，平台更新订单状态为违约，
平台解冻磅计订单物资并返回至物资可卖量中；ERP系统解冻物资，物资增加，ERP系统调用ERP物资导入接口；平台相对应的物资可卖数量增加，若物资已上架，
则挂牌单的可卖量相应的增加。接口反馈结果失败及原因，平台给出提示，订单取消失败。

-----------------------------------------------------分割线--------------------------------------------------------------------------------------

理计提单超过截止日发送短信及站内信:业务需求,系统不取消提单*********************
若超过提货截止日(理计合同支付完成的日期+N，N为在后台期限管理中设置的天数)，买方未制作提单或累计制作提单货物数量小于合同数量

1）系统给买卖双方发送站内信

2）系统判断这个合同是由哪个挂牌单生成的，给挂牌单的上架人员（卖方管理员账号或业务人员账号下的手机号）发送短信提醒。

-----------------------------------------------------分割线--------------------------------------------------------------------------------------

提单确认收货:业务需求
提单状态为待收货（数据库对应的的状态是已打印），若买方超过5天未点击确认收货，则系统自动完成确认收货。？

1.信用金相关进程
1）买方的信用金使用期限到期后，买方的过期未使用信用金增加，可用信用金减少。************
使用期限为tab_zhd_credit_apply中的Expire_Date，根据Credit_Id信用金id去更新tab_zhd_user_credit中的Total_Unused过期未使用额度和Total_Avb总可用金额。
信用金过期后，tab_zhd_credit_apply. App_Fun- Pay_fund增加到Total_Unused，减少Total_Avb；（可以问问勇哥）

2）买方使用信用金购买后的还款期限，到还款期限后，到期信用金增加
还款期限为tab_zhd_credit_use_detail中的Payback_Date还款日期，根据App_Id信用金申请id去找到tab_zhd_credit_apply的Credit_Id信用金id去
更新tab_zhd_user_credit中的Used_Expired到期未还款信用金。
tab_zhd_credit_apply.Need_Offset的增加到Used_Expired。

3）催款时间，到还款期限前Y天，系统给买卖双方会员管理员发送催款短信。
催款时间为tab_zhd_credit_use_detail的Refund_Date催款日期

----------------------------------------------------------------------------------------------------------------------

2.系统自动确认发票
1）卖方在平台上确认开票后的15天内，买方一直未确认收票，则系统自动进行收票确认
tab_zhd_invoice中的invoice_time开票时间+15天为系统自动确认收票，状态为已开票的发票申请，进行自动确认收票，修改状态为3:已确认。***************

--------------------------------------------------------------------------------------------------------------------------

3.系统自动确认收款
1）状态为：“卖方待收款买方待收款”的质量异议单，若买方在超过10天后，还未确认收款，则系统自动收款确认并评价（好评），修改质量异议单状态为“卖方待收款买方已收款”。********
2）状态为：“卖方已收款买方待收款”的质量异议单，若买方在超过10天后，还未确认收款，则系统自动收款确认并评价（好评），修改质量异议单状态为“卖方已收款买方已收款”。
3）状态为：“待买方收款”的质量异议单，若买方在超过10天后，还未确认收款，则系统自动收款确认并评价（好评），修改质量异议单状态为“完成”。

--------------------------------------------------------------------------------------------------------------------------

4.买方申请加工：超过交货时间，卖方还未受理，加工申请单状态为已过期****************************
tab_zhd_process中delivery_date交货时间，超过后修改加工申请状态为已过期

---------------------------------------------------------------------------------------------------------------------------------

5.每晚发布首页今日热销的动态引用。


单据编号生成：

import com.forlink.spex.util.BillCodeService;

	@Autowired
	BillCodeService billCodeService;

	OrderSBean order = orderSManageService.getOrdersBeanById(147);//根据具体主表更换实体
	/**
	 * 生成单据编码
	 * @param bean		实体bean对象(传对应主表实体对象，domainNo必须有值)
	 * @param bill_type	单据类型：
	 * @param contract_type	交易模式
	 * @param trade_class	交易类型
	 * @param buyorsell 	买卖方向
	 * @param seq		单据的seq
	 * @return
	 * @throws Exception
	 */
	String billCode = billCodeService.getBillCodeNo(order, 1, 10, -1, -1 ,order.getOrderId());

注：需设值定制库表字段为
tab_zhd_objection.objection_no质量异议单号。bill_type=14、contract_type=-1、trade_class=-1、buyorsell=-1、seq=tab_zhd_objection.id

tab_zhd_invoice.s1发票申请单号。bill_type=15、contract_type=-1、trade_class=-1、buyorsell=-1、seq=tab_zhd_invoice.id(提交申请时设值，管理界面单号显示字段需要修改)

tab_zhd_process.s1加工申请单号。bill_type=17、contract_type=-1、trade_class=-1、buyorsell=-1、seq=tab_zhd_process.id(管理界面单号显示字段需要修改)

tab_zhd_credit_apply.app_no信用金申请单号。bill_type=19、contract_type=-1、trade_class=-1、buyorsell=-1、seq=tab_zhd_credit_apply.app_id



select * from TABF_BILL_CODING_RULE t
select * from TABF_BILL_CODE_LAST t




















